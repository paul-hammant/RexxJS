<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>RexxJS Arithmetic Operations Demo</title>


    <!-- Shared demo CSS -->
    <link rel="stylesheet" href="demo-common.css">

    <!-- Load the RexxJS bundle -->
    <script src="dist/rexxjs.bundle.js"></script>

    <!-- Load the document write styled output handler -->
    <script src="../output/document-write-styled-output-handler.js"></script>

    <!-- Load the shared demo executor -->
    <script src="demo-executor.js"></script>

    <!-- REXX Script for arithmetic operations demonstration -->
    <script type="text/rexx" id="arithmetic-script">
        /* Auto-executing REXX Arithmetic Operations Demo */

        SAY "=== REXX Arithmetic Operations Demo ==="
        SAY ""

        /* Basic arithmetic */
        LET a = 10
        LET b = 3
        SAY "Basic Arithmetic:"
        SAY "  a = " || a || ", b = " || b
        SAY "  Addition: a + b = " || (a + b)
        SAY "  Subtraction: a - b = " || (a - b)
        SAY "  Multiplication: a * b = " || (a * b)
        SAY "  Division: a / b = " || (a / b)
        SAY "  Modulo (remainder): a % b = " || (a % b)
        SAY "  Power: a ** 2 = " || (a ** 2)
        SAY ""

        /* Floating point arithmetic */
        LET x = 3.14159
        LET y = 2.71828
        SAY "Floating Point Arithmetic:"
        SAY "  x = " || x || ", y = " || y
        SAY "  x + y = " || (x + y)
        SAY "  x * y = " || (x * y)
        SAY "  x / y = " || (x / y)
        SAY ""

        /* Integer arithmetic functions */
        SAY "Integer Functions:"
        SAY "  ABS(-42) = " || ABS(-42)
        SAY "  ABS(42) = " || ABS(42)
        SAY "  INT(3.7) = " || INT(3.7)
        SAY "  INT(-3.7) = " || INT(-3.7)
        SAY ""

        /* Mathematical functions */
        SAY "Mathematical Functions:"
        SAY "  SQRT(16) = " || SQRT(16)
        SAY "  SQRT(2) = " || SQRT(2)
        SAY "  MAX(10, 5, 20, 3) = " || MAX(10, 5, 20, 3)
        SAY "  MIN(10, 5, 20, 3) = " || MIN(10, 5, 20, 3)
        SAY ""

        /* Increment and decrement patterns */
        LET counter = 5
        SAY "Counter Operations:"
        SAY "  Initial counter = " || counter
        counter = counter + 1
        SAY "  After increment: " || counter
        counter = counter - 1
        SAY "  After decrement: " || counter
        SAY ""

        /* Operator Precedence (BODMAS/PEMDAS) */
        SAY "Operator Precedence (BODMAS):"
        SAY "  2 + 3 * 4 = " || (2 + 3 * 4) || " (multiply first, then add)"
        SAY "  (2 + 3) * 4 = " || ((2 + 3) * 4) || " (parentheses override)"
        SAY "  10 - 6 / 2 = " || (10 - 6 / 2) || " (divide first)"
        SAY "  2 ** 3 * 4 = " || (2 ** 3 * 4) || " (power first, then multiply)"
        SAY "  10 / 2 * 3 = " || (10 / 2 * 3) || " (left-to-right for same level)"
        SAY "  2 + 3 ** 2 - 1 = " || (2 + 3 ** 2 - 1) || " (power > add/sub)"
        SAY ""

        /* Complex expressions */
        SAY "Complex Expressions with Precedence:"
        LET p = 5
        LET q = 3
        LET r = 2
        SAY "  p=" || p || ", q=" || q || ", r=" || r
        SAY "  p + q * r = " || (p + q * r) || " (equals " || (3 * 2) || " + " || p || ")"
        SAY "  (p + q) * r = " || ((p + q) * r) || " (sum multiplied by r)"
        SAY "  p * q + r ** 2 = " || (p * q + r ** 2) || " (multiply, power, then add)"
        SAY "  100 / 4 / 5 = " || (100 / 4 / 5) || " (left-to-right: (100/4)/5)"
        SAY ""

        SAY "=== Arithmetic Operations Demo Complete ==="
    </script>

</head>
<body>
    <h1>RexxJS Arithmetic Operations Demo</h1>
    <div class="intro">
        <p><strong>Auto-executing REXX script</strong> demonstrating arithmetic operations and mathematical functions.</p>
        <p>Covers basic arithmetic, floating-point operations, and built-in mathematical functions.</p>
    </div>

    <h2>REXX Output:</h2>
    <div class="output-section">

        <script>
            // Auto-execute using shared demo executor - wait for dependencies to load
            async function runDemo() {
                // Wait for all required global objects to be available
                let attempts = 0;
                while ((typeof executeRexxDemo === 'undefined' || typeof RexxInterpreterBuilder === 'undefined') && attempts < 50) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                    attempts++;
                }

                if (typeof executeRexxDemo === 'undefined') {
                    console.error('executeRexxDemo not found after 5 seconds');
                    return;
                }

                try {
                    await executeRexxDemo('arithmetic-script', {
                        traceMode: 'NORMAL',
                        traceToOutput: true
                    });
                } catch (error) {
                    console.error('Failed to execute demo:', error);
                }
            }

            // Run when DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', runDemo);
            } else {
                runDemo();
            }
        </script>
    </div>

    <h2>Arithmetic Operators</h2>
    <ul>
        <li><strong>+ (Addition)</strong> - Adds two numbers</li>
        <li><strong>- (Subtraction)</strong> - Subtracts the second number from the first</li>
        <li><strong>* (Multiplication)</strong> - Multiplies two numbers</li>
        <li><strong>/ (Division)</strong> - Divides the first number by the second</li>
        <li><strong>% (Modulo)</strong> - Returns the remainder of division</li>
        <li><strong>** (Power/Exponentiation)</strong> - Raises the first number to the power of the second</li>
    </ul>

    <h2>Mathematical Functions</h2>
    <ul>
        <li><strong>ABS(number)</strong> - Returns the absolute value</li>
        <li><strong>INT(number)</strong> - Returns the integer part of a number</li>
        <li><strong>SQRT(number)</strong> - Returns the square root</li>
        <li><strong>MAX(arg1, arg2, ...)</strong> - Returns the maximum value</li>
        <li><strong>MIN(arg1, arg2, ...)</strong> - Returns the minimum value</li>
    </ul>

    <h2>Important Notes</h2>
    <ul>
        <li>REXX performs automatic type conversion between strings and numbers</li>
        <li>Operator precedence follows standard mathematical rules (exponentiation, then multiplication/division, then addition/subtraction)</li>
        <li>Use parentheses to explicitly control operation order</li>
    </ul>


</body>
</html>
